// === PAGE TOGGLE ===
const page1 = document.getElementById('page1');
const page2 = document.getElementById('page2');
const addBtn = document.getElementById('addBtn');
const backBtn = document.getElementById('backBtn');
const homeBtn = document.getElementById('homeBtn'); // Assuming you have an element with id="homeBtn"

addBtn.addEventListener('click', () => {
  page1.classList.add('hidden');
  page2.classList.remove('hidden');
  window.scrollTo(0,0);
});

backBtn.addEventListener('click', () => {
  page2.classList.add('hidden');
  page1.classList.remove('hidden');
  window.scrollTo(0,0);
});

// Home button → always go to page1
if (homeBtn) {
  homeBtn.addEventListener('click', () => {
    page2.classList.add('hidden');
    page1.classList.remove('hidden');
    window.scrollTo(0,0);
  });
}

// === FILE UPLOAD LABEL ===
function attachFileLabel(inputId) {
  const input = document.getElementById(inputId);
  if (!input) return;
  const label = document.querySelector(`label[for="${inputId}"]`);
  input.addEventListener('change', () => {
    if (!input.files || input.files.length === 0) {
      label.innerHTML = 'Upload image ⤓';
    } else {
      label.innerHTML = input.files[0].name + ' ✓';
    }
  });
}
attachFileLabel('bannerFile');
attachFileLabel('fileUpload');

// === SEARCH FILTER ===
const searchInput = document.getElementById("search");
const cards = document.querySelectorAll(".card");

searchInput.addEventListener("input", () => {
  const term = searchInput.value.trim().toLowerCase();

  cards.forEach(card => {
    const title = card.querySelector(".card-title").textContent.toLowerCase();
    const excerpt = card.querySelector(".card-excerpt").textContent.toLowerCase();

    if (title.includes(term) || excerpt.includes(term)) {
      card.style.display = "flex";
    } else {
      card.style.display = "none";
    }
  });
});

// === MODAL ===
const modal = document.getElementById("cardModal");
const closeBtn = document.querySelector(".close-btn");
const modalImage = document.querySelector(".article-image");
const modalTitle = document.querySelector(".modal-title");
const modalMeta = document.querySelector(".modal-meta");

// Open modal when clicking a card
document.querySelectorAll(".card").forEach(card => {
  card.addEventListener("click", () => {
    const imgSrc = card.querySelector(".card-img").src;
    const title = card.querySelector(".card-title").textContent;
    const authorName = card.querySelector(".author-name")?.textContent || "";
    const date = card.querySelector(".date")?.textContent || "";

    modalImage.src = imgSrc;
    modalTitle.textContent = title;
    modalMeta.textContent = `${authorName} — ${date}`;

    modal.style.display = "block";
  });
});

// Close modal on click
closeBtn.addEventListener("click", () => modal.style.display = "none");
window.addEventListener("click", (e) => {
  if (e.target === modal) modal.style.display = "none";
});

// Close modal on ESC key
window.addEventListener("keydown", (e) => {
  if (e.key === "Escape" && modal.style.display === "block") {
    modal.style.display = "none";
  }
});

document.querySelectorAll('.menu-toggle').forEach(toggle => {
  toggle.addEventListener('click', () => {
    const navMenu = toggle.closest('.navbar').querySelector('.nav-menu');
    navMenu.classList.toggle('active');
  });
});